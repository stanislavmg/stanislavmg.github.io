<!DOCTYPE html>
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/fonts.css">
    
    <title>Stanislavmg</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <script src="/js/dark.js" defer=""></script>

</head>


<html>
<!DOCTYPE html>
<html>

<body>
  <header class="site-header">

    <div class="wrapper">
      <a class="muted small" href="http://localhost:1313/">Stanislavmg</a>
    </div>
  </header>
</body>

</html>

<h1>Админ заметки</h1>
<p class="post-meta"><time itemprop="datePublished">April 19, 2024</time>
</p>
<h1 id="командая-строка-windows">Командая строка windows</h1>
<h2 id="команды-диагностики-сети">Команды диагностики сети:</h2>
<ol>
<li>ping
Проверка доступности хоста, измерение времени отклика от хоста, проверить разрешается ли доменное имя.</li>
<li>netstat
Просмотр активных сетевых соединений и состояния портов по каждому процессу, просмотр статистики по UDP и TCP(сколько пакетов получено, отправлено, сколько открыто соединений), просмотр таблицы маршрутизации
Основные статусы портов:</li>
</ol>
<ul>
<li>LISTEN - в режиме прослушивания</li>
<li>ESTABLISHED - соединение по порту установлено</li>
<li>CLOSED - порт закрыт</li>
</ul>
<ol start="3">
<li>telnet
Установка соединения по протоколу telnet. Устанавливает TCP сессию к хосту на указанный порт, если такое соединение возможно. Используется для проверки доступности порта.</li>
<li>tracert/tracerout
Отслеживание всех хопов пакета к хосту назначения. Позволяет понять в каком узле на пути пакета возникает проблема.
Утилита работает так:
отправляются icmp/udp пакеты с TTL 1 к хосту назначения.
от каждого промежуточного узла приходит ответ TIME_EXCEEDED.
после чего tracept увеличиват TTL на 1 и отправляет снова.
так продолжается, пока не будет достигнут хост назначение
В выводе команды *** означают, что узел не предоставил ответ (например стоит фильтрация пакетов в фаерволе) или время отклика превысило 5 секунд. По умолчанию максимальный TTL = 30.</li>
<li>nslookup/dig/host
Проверка разрешения имен на конкретном DNS сервере. Можно также проверить определенную запись(A, AAAA, PTR, NS, SOA) на DNS сервере. Не авторитетный ответ означает, что днс сервер не имеет доступа к именам домена, запрашиваемого хоста и запрос был перенаправлен владельцу домена.</li>
<li>ipconfig
Просмотр сетевый интерфесов и их настроек. С помощью команды можно запросить новый адрес у DHCP сервера, очистить кеш DNS службы.</li>
<li>hostname
Отображения имени хоста.</li>
<li>getmac
Отобразить MAC адреса интерфейсов на определенном хосте.</li>
<li>arp
Отображение, добавление и удаление mac адресов в таблицу.</li>
<li>nbtstat</li>
<li>route</li>
</ol>
<h2 id="команды-windows-общего-назначения">Команды Windows общего назначения:</h2>
<ol>
<li>tasklist | taskkil /PID 9900
Отображает запущенные процессы</li>
<li>systeminfo
Отображение общей системной информации</li>
</ol>
<h1 id="траблшутинг">Траблшутинг</h1>
<p>Любой поиск неисправности стоит начать с этих шагов:</p>
<ul>
<li>уточнить у пользователя имеет ли проблемы массовый характер.</li>
<li>перезапустить машину</li>
<li>уточнить с чем конкретно возникает проблема(локально или когда пытается запросить/отправить данные)</li>
</ul>
<h2 id="траблшутинг-сети">Траблшутинг сети</h2>
<p>Можно разделить условно проблемы на 2 категории: Проблемы с соединением и Проблемы и доступом</p>
<p>Проблемы с соединением.
Отстутствие соединиения. Проблемы L1 уровня OSI. Может быть связано с плохо обжатым кабелем, неисправность сетевой карты или драйвера сетевой карты. Проблема на стороне провайдера, обычно массовый характер.</p>
<p>Ограниченное соединение
Проблемы уровня L3 и выше. Самы распространенные:</p>
<ul>
<li>не получает адрес от DHCP сервера, адрес 169.254.Х.Х APIPA</li>
<li>получает адрес не из нужного диапазона, соответственно не проходит через ACL на маршрутизаторе</li>
<li>конфликт адресов случается, когда на устройсте вручную прописан адрес.</li>
</ul>
<p>Проблемы доступа
Не может подключиться к определенному сайту - запрещено на прокси сервере или на маршрутизаторе в ACL</p>
<ul>
<li>проверяем доступность прокси через telnet. Адрес прокси и порт можно узнать в Interne options. Если порт открывается - проблема на прокси сервере, если нет, что проблема в сети</li>
</ul>
<p>Ошибка DNS 105
Проверяем с помощью nslookup доменное имя на сервере по умолчанию и используя сторонний сервер. Если на сервере по умолчанию ошибка, а на стороннем разрешается, то проблема в нашем DNS сервере. Одна из проблем может быть в кешировании устаревшего адреса, что решается через команду ipconfig /flushdns, посмотреть кеш - ipconfig /dispaydns</p>
<h2 id="траблшутинг-приложений">Траблшутинг приложений</h2>
<p>Нужно определить с какой частью приложения возникает ошибка.</p>
<ul>
<li>Ошибка в программном коде - не может быть решена</li>
<li>Если приложение является клиентом и отправляет запросы на сервер, то нужно убедиться что: с сервером все в порядке и проблема не массовая</li>
<li>у клиента все в порядке с доступами на сервер</li>
<li>если проблема возникает с сетью, то траблшутим сеть</li>
<li>если с сетью норм и сервером все окей, проблема локальна, ищем на хосте.</li>
</ul>
<p>Ошибка доступа может быть решена с помощью утилиты procmon.exe из пакета sysinternals utilities. Программа позволяет просмотреть запросы приложений к файловой системе и ключам реестра.
Одно из основных применений <strong>Process Monitor</strong> - определение причин аварийного завершения приложений в случае отсутствия или неверного<br>
расположения файлов, каталогов,  разделов и ключей реестра.</p>
<h2 id="система">Система</h2>
<p>BOSD - ошибки, связанные с ядром системы. Могу возникать при загрузке ядра, инициализации и в процессе.
Наиболее распространенной причиной данной ошибки является некорректная загрузка драйвера.</p>
<p>Синий экран смерти (BSOD) с разными кодами на разных драйверах с большой
вероятностью говорит о неполадках в оборудовании, обычно это:</p>
<ul>
<li>оперативная память</li>
<li>материнская плата</li>
<li>несовместимость памяти и материнской платы</li>
<li>перегрев микросхем чипсета материнской платы</li>
<li>вздувшиеся электролитические конденсаторы на материнской плате</li>
<li>блок питания.</li>
</ul>
<p>Одним из способов траблшутинга - просмотра дампа памяти после ошибки с помощью средств Windows (Windbg, Dumpchk, DaRT) и сторонних программ BlueScreenView. Это можно сделать из безопасного режима запуска. Если запустить безопасный режим нет возможности, можно прибегнуть к загрузке с liveCD и восстановлению через DaRT.</p>
<h3 id="компьютер-виснет">Компьютер виснет</h3>
<p>Для диагностики можно воспользоваться утилитой из набора sysinternals <strong>ProcessExplorer</strong>. Программа позволяет посмотреть, какое приложение жрет ресурс CPU и предпринять меры. Например, терминировать процесс или понизить его приоритет.
Еще один из показателей неисправности - процент загруженности процессора операциями прерывания. В норме он должен быть 1-5%. Если этот показател превышен, это может говорить о некоректной работе драйвера устройства.  Провери использование драйверами процессорного времени можно с помощью прокраммы kernrate.</p>
<h3 id="удаление-вируса">Удаление вируса</h3>
<p>Через <strong>ProcessExplorer</strong> также позволяет обнаружить вирусное ПО. Процессы таких программ подсвечиваются фиолетовым цветом и могут иметь ряд признаков:</p>
<ul>
<li>нет цифровой подписи, можно проверить с интернетом.</li>
<li>не указан производитель ПО</li>
<li>имя процесса маскируется под системный процесс</li>
</ul>
<p>Утилита <strong>SearchMyFiles</strong> позволяет просмотреть все файли которые создавались/открывались/редактировались за определенный промежуток времени. Так можно определить сторонее ПО, отфильтровав созданные файлы по дате поломки. Программа также может использоваться на LiveCD в средства восстановления Windows.</p>
<h2 id="железо">Железо</h2>
<h3 id="не-начинается-загрузка">Не начинается загрузка</h3>
<p>Не проходит первый этап загрузки (POST), когда система тестирует на работоспособность компонента, необходимые для запуска OS. Обычно производителем материнских плат предусмотрен набор световых или звуковых сигналов ошибок, по которым можно понять, с каким компонентом возникла проблема. Иногда система может не подавать никаких сигналов, что может свидетельствовать о более серьезных проблемах при которых не начинается даже первый этап загрузки OS.</p>
<p>Решение:</p>
<ul>
<li>отключить все возможные перефирийные устройства, оставить 1 модуль памяти.</li>
<li>на этапе POST система опрашивает все доступные контроллеры и заносит их в специальную таблицу DMI. При смене какого-либо оборудования такая таблица становится неактуальной и вызывает ошибку загрузки. При такой ошибке система оповещает сообщением “Building DMI pool” или “Verifying DMI pool data”</li>
</ul>
<h3 id="произвольное-выключение">Произвольное выключение</h3>
<p>Может быть связано с перегревом. Проверяется через системы мониторинга таких как AIDA64</p>
<p>Еще одна из причин - срабатывание защиты БП. Может срабатывать при недостаточной мощности БП или кратковременном замыкании на плате.</p>
<h1 id="машрутизация-в-сети">Машрутизация в сети</h1>
<p>MAC адрес является физическим адресом сетевого интерфейса и служит для взаимодействия между устройствами в локальной сети на канальном уровне. Назначается производителем устройства или администратором.</p>
<p>IP адрес нужен для взаимодействия на сетевом уровне в интернете.</p>
<p>Как происходит отправка пакетов.
Устройство формирует ip-пакет, указывая адрес отправителя и адрес получателя. Инкапсулирует пакет в фрейм и указывает MAC адрес отправителя и получателя. Если MAC адрес неизвестен, рассылается ARP запрос.</p>
<p>ARP (Adress Resolution Protokol) - протокол разрешения MAC адресов. Состоит из этапов:</p>
<ul>
<li>устройством-отправителем формируется широковещателный запрос принадлежности IP адреса</li>
<li>устройства, которым не принадлежит запрашиваемый IP, отбрасывают пакет</li>
<li>устройство-получатель отправляет ARP ответ отправителю, указывая свой MAC адрес</li>
<li>MAC адрес заносится в ARP таблицу
В таблице есть динамические записи, которые заносятся протоколом ARP и статические, которые прописываются вручную. Динамически обновляются через какое-то время, статические остаются в таблице навсегда.</li>
</ul>
<h1 id="загрузка-os">Загрузка OS</h1>
<p>Загрузка системы начинается с подачи питания и выполнения следующих шагов:</p>
<ol>
<li>Запуск BIOS/UEFI на ПЗУ. Этап тестирования контроллеров подпрограммой POST (Power On Self Test), которая проверяет необходимые утройства для запуска OS (процессор, память, клавиатура, видеоадаптер, диск). Если какое-то утсройство неисправно, выдается звуковой/световой сигнал ошибки.</li>
<li>Руководствуясь очередностью загрузки, BIOS ищет MBR на диске и помещает находящийся в ней загрузчик в оперативную память, после чего передает ему управление. Определяет главную загрузочную запись по сигнатуре 55AA в последних двух байтах первого сектора диска. Если MBR не найдена, считывается следующее устройство в таблице загрузки.</li>
<li>Загрузчик просматривает таблицу разделов на диске, находит активный раздел (PBR) с OS и помещает в память ядро, после чего передает управление системе инициализации ядра.</li>
<li>Инициализация модулей ядра и запуск необходимых системных служб.</li>
</ol>


<footer>
    <div>
        <h3><a href="http://localhost:1313/">На главную</a></h3>
    </div>
</footer>

</html>